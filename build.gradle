group 'com.rojel.wesv'
version '1.0'

//import org.apache.tools.ant.filters.ReplaceTokens


apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'maven'
apply plugin: 'jacoco'

//sourceCompatibility = 1.8

ext {
    println("$rootProject.name")
    BUKKIT_API_VERSION = '1.8.8-R0.1-SNAPSHOT'
    WORLDEDIT_VERSION = '6.1'
    PROTOCOLLIB_VERSION = '4.2.0'
    //BUILD_DIR = "../../../Plugins/BuildDir/$group"
    //FINAL_DIR  = '../../../Plugins/'
    BUILD_DIR = "build/$group"
    FINAL_DIR  = 'Plugins/'
    MAIN_CLASS = "${group}.WorldEditSelectionVisualizer".toString()
}
buildDir = BUILD_DIR


sourceSets {
    main {
        java {
            srcDir 'src/com/darkblade12/particleeffect'
            srcDir 'src/com/rojel/wesv'
        }
        resources {
            srcDir '.'
            include '*.yml'
            exclude '.*.yml'
        }
    }
/*    test {
        java {
            srcDirs = ['src/test/java']
        }
        resources {
            srcDirs = ['src/test/resources']
        }
    }*/
}


repositories {
    mavenCentral()
    mavenLocal()
    maven {
        name "Spigot"
        url "https://hub.spigotmc.org/nexus/content/repositories/snapshots/"
    }
    maven {
        name "BungeeCord"
        url 'https://oss.sonatype.org/content/repositories/snapshots/'
    }
    maven {
        name "WorldEdit"
        url "http://maven.sk89q.com/artifactory/repo/"
    }
    maven {
        name "ProtocolLib"
    	url "http://repo.dmulloy2.net/content/groups/public/"
    }
}
dependencies {
/*    testCompile group: 'junit',
            name: 'junit',
            version: '4.11'*/
    /*WorldEdit*/
    compile group: 'com.sk89q.worldedit',
            name: 'worldedit-bukkit',
            version: WORLDEDIT_VERSION
    //Spigot API
    compile group: 'org.spigotmc',
            name: 'spigot-api',
            version: BUKKIT_API_VERSION
    // ProtocolLib
    compile group: 'com.comphenix.protocol',
            name: 'ProtocolLib',
            version: PROTOCOLLIB_VERSION
//    compile 'net.ess3:Essentials:2.14-SNAPSHOT'
}

jar {
   baseName = 'wesv'
}

task copy(type: Copy) {
    from "${buildDir}/libs"
    into "$FINAL_DIR"
}

jacocoTestReport {
    reports {
        xml.enabled true
        html.enabled false
    }
}

/*task templates(type: Copy) {
    delete "src/main/resources/config.yml"
    delete "src/main/resources/plugin.yml"
    from "template/plugin.yml"
    into 'src/main/resources'
    filter(ReplaceTokens, tokens: [
            version: version,
            name   : rootProject.name,
            class  : MAIN_CLASS,
            genTime: "#Generated At: ${new Date().format("\'MM/dd/yy~hh:mm-a\'")}".toString(),
    ])
    from "template/config.yml"
    into sourceSets.main.resources.getSrcDirs().getAt(0)
}*/
